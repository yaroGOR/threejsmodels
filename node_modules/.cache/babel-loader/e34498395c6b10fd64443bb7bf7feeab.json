{"ast":null,"code":"import _defineProperty from \"/Users/98yaroslavgorban/Desktop/gltfjsx-forked/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _slicedToArray from \"/Users/98yaroslavgorban/Desktop/gltfjsx-forked/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport { useRef, useState, useMemo, useEffect } from 'react';\nimport { AnimationMixer } from 'three';\nimport { useFrame } from '@react-three/fiber';\n\nfunction useAnimations(clips, root) {\n  var ref = useRef();\n  var actualRef = root ? root : ref;\n\n  var _useState = useState(function () {\n    return new AnimationMixer(undefined);\n  }),\n      _useState2 = _slicedToArray(_useState, 1),\n      mixer = _useState2[0];\n\n  var api = useMemo(function () {\n    return {\n      ref: actualRef,\n      clips: clips,\n      actions: clips.reduce(function (prev, clip) {\n        return _extends({}, prev, _defineProperty({}, clip.name, null));\n      }, {}),\n      names: clips.map(function (clip) {\n        return clip.name;\n      }),\n      mixer: mixer\n    };\n  }, [clips, mixer, actualRef]);\n  useFrame(function (state, delta) {\n    return mixer.update(delta);\n  });\n  useEffect(function () {\n    var currentRoot = actualRef.current;\n\n    if (currentRoot) {\n      clips.forEach(function (clip) {\n        return api.actions[clip.name] = mixer.clipAction(clip, currentRoot);\n      });\n    }\n\n    return function () {\n      return Object.values(api.actions).forEach(function (action) {\n        if (currentRoot) {\n          mixer.uncacheAction(action, currentRoot);\n        }\n      });\n    };\n  }, [api, clips, mixer, root, actualRef]);\n  return api;\n}\n\nexport { useAnimations };","map":{"version":3,"names":["_extends","useRef","useState","useMemo","useEffect","AnimationMixer","useFrame","useAnimations","clips","root","ref","actualRef","undefined","mixer","api","actions","reduce","prev","clip","name","names","map","state","delta","update","currentRoot","current","forEach","clipAction","Object","values","action","uncacheAction"],"sources":["/Users/98yaroslavgorban/Desktop/gltfjsx-forked/node_modules/@react-three/drei/core/useAnimations.js"],"sourcesContent":["import _extends from '@babel/runtime/helpers/esm/extends';\nimport { useRef, useState, useMemo, useEffect } from 'react';\nimport { AnimationMixer } from 'three';\nimport { useFrame } from '@react-three/fiber';\n\nfunction useAnimations(clips, root) {\n  const ref = useRef();\n  const actualRef = root ? root : ref;\n  const [mixer] = useState(() => new AnimationMixer(undefined));\n  const api = useMemo(() => ({\n    ref: actualRef,\n    clips,\n    actions: clips.reduce((prev, clip) => _extends({}, prev, {\n      [clip.name]: null\n    }), {}),\n    names: clips.map(clip => clip.name),\n    mixer\n  }), [clips, mixer, actualRef]);\n  useFrame((state, delta) => mixer.update(delta));\n  useEffect(() => {\n    const currentRoot = actualRef.current;\n\n    if (currentRoot) {\n      clips.forEach(clip => api.actions[clip.name] = mixer.clipAction(clip, currentRoot));\n    }\n\n    return () => Object.values(api.actions).forEach(action => {\n      if (currentRoot) {\n        mixer.uncacheAction(action, currentRoot);\n      }\n    });\n  }, [api, clips, mixer, root, actualRef]);\n  return api;\n}\n\nexport { useAnimations };\n"],"mappings":";;AAAA,OAAOA,QAAP,MAAqB,oCAArB;AACA,SAASC,MAAT,EAAiBC,QAAjB,EAA2BC,OAA3B,EAAoCC,SAApC,QAAqD,OAArD;AACA,SAASC,cAAT,QAA+B,OAA/B;AACA,SAASC,QAAT,QAAyB,oBAAzB;;AAEA,SAASC,aAAT,CAAuBC,KAAvB,EAA8BC,IAA9B,EAAoC;EAClC,IAAMC,GAAG,GAAGT,MAAM,EAAlB;EACA,IAAMU,SAAS,GAAGF,IAAI,GAAGA,IAAH,GAAUC,GAAhC;;EACA,gBAAgBR,QAAQ,CAAC;IAAA,OAAM,IAAIG,cAAJ,CAAmBO,SAAnB,CAAN;EAAA,CAAD,CAAxB;EAAA;EAAA,IAAOC,KAAP;;EACA,IAAMC,GAAG,GAAGX,OAAO,CAAC;IAAA,OAAO;MACzBO,GAAG,EAAEC,SADoB;MAEzBH,KAAK,EAALA,KAFyB;MAGzBO,OAAO,EAAEP,KAAK,CAACQ,MAAN,CAAa,UAACC,IAAD,EAAOC,IAAP;QAAA,OAAgBlB,QAAQ,CAAC,EAAD,EAAKiB,IAAL,sBAC3CC,IAAI,CAACC,IADsC,EAC/B,IAD+B,EAAxB;MAAA,CAAb,EAEL,EAFK,CAHgB;MAMzBC,KAAK,EAAEZ,KAAK,CAACa,GAAN,CAAU,UAAAH,IAAI;QAAA,OAAIA,IAAI,CAACC,IAAT;MAAA,CAAd,CANkB;MAOzBN,KAAK,EAALA;IAPyB,CAAP;EAAA,CAAD,EAQf,CAACL,KAAD,EAAQK,KAAR,EAAeF,SAAf,CARe,CAAnB;EASAL,QAAQ,CAAC,UAACgB,KAAD,EAAQC,KAAR;IAAA,OAAkBV,KAAK,CAACW,MAAN,CAAaD,KAAb,CAAlB;EAAA,CAAD,CAAR;EACAnB,SAAS,CAAC,YAAM;IACd,IAAMqB,WAAW,GAAGd,SAAS,CAACe,OAA9B;;IAEA,IAAID,WAAJ,EAAiB;MACfjB,KAAK,CAACmB,OAAN,CAAc,UAAAT,IAAI;QAAA,OAAIJ,GAAG,CAACC,OAAJ,CAAYG,IAAI,CAACC,IAAjB,IAAyBN,KAAK,CAACe,UAAN,CAAiBV,IAAjB,EAAuBO,WAAvB,CAA7B;MAAA,CAAlB;IACD;;IAED,OAAO;MAAA,OAAMI,MAAM,CAACC,MAAP,CAAchB,GAAG,CAACC,OAAlB,EAA2BY,OAA3B,CAAmC,UAAAI,MAAM,EAAI;QACxD,IAAIN,WAAJ,EAAiB;UACfZ,KAAK,CAACmB,aAAN,CAAoBD,MAApB,EAA4BN,WAA5B;QACD;MACF,CAJY,CAAN;IAAA,CAAP;EAKD,CAZQ,EAYN,CAACX,GAAD,EAAMN,KAAN,EAAaK,KAAb,EAAoBJ,IAApB,EAA0BE,SAA1B,CAZM,CAAT;EAaA,OAAOG,GAAP;AACD;;AAED,SAASP,aAAT"},"metadata":{},"sourceType":"module"}