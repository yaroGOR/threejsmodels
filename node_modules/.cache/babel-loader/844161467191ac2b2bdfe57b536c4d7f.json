{"ast":null,"code":"import { TempNode } from './TempNode.js';\nvar declarationRegexp = /^struct\\s*([a-z_0-9]+)\\s*{\\s*((.|\\n)*?)}/gim,\n    propertiesRegexp = /\\s*(\\w*?)\\s*(\\w*?)(\\=|\\;)/gim;\n\nfunction StructNode(src) {\n  TempNode.call(this);\n  this.parse(src);\n}\n\nStructNode.prototype = Object.create(TempNode.prototype);\nStructNode.prototype.constructor = StructNode;\nStructNode.prototype.nodeType = 'Struct';\n\nStructNode.prototype.getType = function (builder) {\n  return builder.getTypeByFormat(this.name);\n};\n\nStructNode.prototype.getInputByName = function (name) {\n  var i = this.inputs.length;\n\n  while (i--) {\n    if (this.inputs[i].name === name) {\n      return this.inputs[i];\n    }\n  }\n};\n\nStructNode.prototype.generate = function (builder, output) {\n  if (output === 'source') {\n    return this.src + ';';\n  } else {\n    return builder.format('( ' + this.src + ' )', this.getType(builder), output);\n  }\n};\n\nStructNode.prototype.parse = function (src) {\n  this.src = src || '';\n  this.inputs = [];\n  var declaration = declarationRegexp.exec(this.src);\n\n  if (declaration) {\n    var properties = declaration[2],\n        match;\n\n    while (match = propertiesRegexp.exec(properties)) {\n      this.inputs.push({\n        type: match[1],\n        name: match[2]\n      });\n    }\n\n    this.name = declaration[1];\n  } else {\n    this.name = '';\n  }\n\n  this.type = this.name;\n};\n\nStructNode.prototype.toJSON = function (meta) {\n  var data = this.getJSONNode(meta);\n\n  if (!data) {\n    data = this.createJSONNode(meta);\n    data.src = this.src;\n  }\n\n  return data;\n};\n\nexport { StructNode };","map":{"version":3,"names":["TempNode","declarationRegexp","propertiesRegexp","StructNode","src","call","parse","prototype","Object","create","constructor","nodeType","getType","builder","getTypeByFormat","name","getInputByName","i","inputs","length","generate","output","format","declaration","exec","properties","match","push","type","toJSON","meta","data","getJSONNode","createJSONNode"],"sources":["/Users/98yaroslavgorban/Desktop/gltfjsx-forked/node_modules/three-stdlib/nodes/core/StructNode.js"],"sourcesContent":["import { TempNode } from './TempNode.js';\n\nvar declarationRegexp = /^struct\\s*([a-z_0-9]+)\\s*{\\s*((.|\\n)*?)}/gim,\n    propertiesRegexp = /\\s*(\\w*?)\\s*(\\w*?)(\\=|\\;)/gim;\n\nfunction StructNode(src) {\n  TempNode.call(this);\n  this.parse(src);\n}\n\nStructNode.prototype = Object.create(TempNode.prototype);\nStructNode.prototype.constructor = StructNode;\nStructNode.prototype.nodeType = 'Struct';\n\nStructNode.prototype.getType = function (builder) {\n  return builder.getTypeByFormat(this.name);\n};\n\nStructNode.prototype.getInputByName = function (name) {\n  var i = this.inputs.length;\n\n  while (i--) {\n    if (this.inputs[i].name === name) {\n      return this.inputs[i];\n    }\n  }\n};\n\nStructNode.prototype.generate = function (builder, output) {\n  if (output === 'source') {\n    return this.src + ';';\n  } else {\n    return builder.format('( ' + this.src + ' )', this.getType(builder), output);\n  }\n};\n\nStructNode.prototype.parse = function (src) {\n  this.src = src || '';\n  this.inputs = [];\n  var declaration = declarationRegexp.exec(this.src);\n\n  if (declaration) {\n    var properties = declaration[2],\n        match;\n\n    while (match = propertiesRegexp.exec(properties)) {\n      this.inputs.push({\n        type: match[1],\n        name: match[2]\n      });\n    }\n\n    this.name = declaration[1];\n  } else {\n    this.name = '';\n  }\n\n  this.type = this.name;\n};\n\nStructNode.prototype.toJSON = function (meta) {\n  var data = this.getJSONNode(meta);\n\n  if (!data) {\n    data = this.createJSONNode(meta);\n    data.src = this.src;\n  }\n\n  return data;\n};\n\nexport { StructNode };\n"],"mappings":"AAAA,SAASA,QAAT,QAAyB,eAAzB;AAEA,IAAIC,iBAAiB,GAAG,6CAAxB;AAAA,IACIC,gBAAgB,GAAG,8BADvB;;AAGA,SAASC,UAAT,CAAoBC,GAApB,EAAyB;EACvBJ,QAAQ,CAACK,IAAT,CAAc,IAAd;EACA,KAAKC,KAAL,CAAWF,GAAX;AACD;;AAEDD,UAAU,CAACI,SAAX,GAAuBC,MAAM,CAACC,MAAP,CAAcT,QAAQ,CAACO,SAAvB,CAAvB;AACAJ,UAAU,CAACI,SAAX,CAAqBG,WAArB,GAAmCP,UAAnC;AACAA,UAAU,CAACI,SAAX,CAAqBI,QAArB,GAAgC,QAAhC;;AAEAR,UAAU,CAACI,SAAX,CAAqBK,OAArB,GAA+B,UAAUC,OAAV,EAAmB;EAChD,OAAOA,OAAO,CAACC,eAAR,CAAwB,KAAKC,IAA7B,CAAP;AACD,CAFD;;AAIAZ,UAAU,CAACI,SAAX,CAAqBS,cAArB,GAAsC,UAAUD,IAAV,EAAgB;EACpD,IAAIE,CAAC,GAAG,KAAKC,MAAL,CAAYC,MAApB;;EAEA,OAAOF,CAAC,EAAR,EAAY;IACV,IAAI,KAAKC,MAAL,CAAYD,CAAZ,EAAeF,IAAf,KAAwBA,IAA5B,EAAkC;MAChC,OAAO,KAAKG,MAAL,CAAYD,CAAZ,CAAP;IACD;EACF;AACF,CARD;;AAUAd,UAAU,CAACI,SAAX,CAAqBa,QAArB,GAAgC,UAAUP,OAAV,EAAmBQ,MAAnB,EAA2B;EACzD,IAAIA,MAAM,KAAK,QAAf,EAAyB;IACvB,OAAO,KAAKjB,GAAL,GAAW,GAAlB;EACD,CAFD,MAEO;IACL,OAAOS,OAAO,CAACS,MAAR,CAAe,OAAO,KAAKlB,GAAZ,GAAkB,IAAjC,EAAuC,KAAKQ,OAAL,CAAaC,OAAb,CAAvC,EAA8DQ,MAA9D,CAAP;EACD;AACF,CAND;;AAQAlB,UAAU,CAACI,SAAX,CAAqBD,KAArB,GAA6B,UAAUF,GAAV,EAAe;EAC1C,KAAKA,GAAL,GAAWA,GAAG,IAAI,EAAlB;EACA,KAAKc,MAAL,GAAc,EAAd;EACA,IAAIK,WAAW,GAAGtB,iBAAiB,CAACuB,IAAlB,CAAuB,KAAKpB,GAA5B,CAAlB;;EAEA,IAAImB,WAAJ,EAAiB;IACf,IAAIE,UAAU,GAAGF,WAAW,CAAC,CAAD,CAA5B;IAAA,IACIG,KADJ;;IAGA,OAAOA,KAAK,GAAGxB,gBAAgB,CAACsB,IAAjB,CAAsBC,UAAtB,CAAf,EAAkD;MAChD,KAAKP,MAAL,CAAYS,IAAZ,CAAiB;QACfC,IAAI,EAAEF,KAAK,CAAC,CAAD,CADI;QAEfX,IAAI,EAAEW,KAAK,CAAC,CAAD;MAFI,CAAjB;IAID;;IAED,KAAKX,IAAL,GAAYQ,WAAW,CAAC,CAAD,CAAvB;EACD,CAZD,MAYO;IACL,KAAKR,IAAL,GAAY,EAAZ;EACD;;EAED,KAAKa,IAAL,GAAY,KAAKb,IAAjB;AACD,CAtBD;;AAwBAZ,UAAU,CAACI,SAAX,CAAqBsB,MAArB,GAA8B,UAAUC,IAAV,EAAgB;EAC5C,IAAIC,IAAI,GAAG,KAAKC,WAAL,CAAiBF,IAAjB,CAAX;;EAEA,IAAI,CAACC,IAAL,EAAW;IACTA,IAAI,GAAG,KAAKE,cAAL,CAAoBH,IAApB,CAAP;IACAC,IAAI,CAAC3B,GAAL,GAAW,KAAKA,GAAhB;EACD;;EAED,OAAO2B,IAAP;AACD,CATD;;AAWA,SAAS5B,UAAT"},"metadata":{},"sourceType":"module"}