{"ast":null,"code":"import { TempNode } from './TempNode.js';\nvar declarationRegexp = /^([a-z_0-9]+)\\s([a-z_0-9]+)\\s?\\=?\\s?(.*?)(\\;|$)/i;\n\nfunction ConstNode(src, useDefine) {\n  TempNode.call(this);\n  this.parse(src || ConstNode.PI, useDefine);\n}\n\nConstNode.PI = 'PI';\nConstNode.PI2 = 'PI2';\nConstNode.RECIPROCAL_PI = 'RECIPROCAL_PI';\nConstNode.RECIPROCAL_PI2 = 'RECIPROCAL_PI2';\nConstNode.LOG2 = 'LOG2';\nConstNode.EPSILON = 'EPSILON';\nConstNode.prototype = Object.create(TempNode.prototype);\nConstNode.prototype.constructor = ConstNode;\nConstNode.prototype.nodeType = 'Const';\n\nConstNode.prototype.getType = function (builder) {\n  return builder.getTypeByFormat(this.type);\n};\n\nConstNode.prototype.parse = function (src, useDefine) {\n  this.src = src || '';\n  var name,\n      type,\n      value = '';\n  var match = this.src.match(declarationRegexp);\n  this.useDefine = useDefine || this.src.charAt(0) === '#';\n\n  if (match && match.length > 1) {\n    type = match[1];\n    name = match[2];\n    value = match[3];\n  } else {\n    name = this.src;\n    type = 'f';\n  }\n\n  this.name = name;\n  this.type = type;\n  this.value = value;\n};\n\nConstNode.prototype.build = function (builder, output) {\n  if (output === 'source') {\n    if (this.value) {\n      if (this.useDefine) {\n        return '#define ' + this.name + ' ' + this.value;\n      }\n\n      return 'const ' + this.type + ' ' + this.name + ' = ' + this.value + ';';\n    } else if (this.useDefine) {\n      return this.src;\n    }\n  } else {\n    builder.include(this);\n    return builder.format(this.name, this.getType(builder), output);\n  }\n};\n\nConstNode.prototype.generate = function (builder, output) {\n  return builder.format(this.name, this.getType(builder), output);\n};\n\nConstNode.prototype.copy = function (source) {\n  TempNode.prototype.copy.call(this, source);\n  this.parse(source.src, source.useDefine);\n  return this;\n};\n\nConstNode.prototype.toJSON = function (meta) {\n  var data = this.getJSONNode(meta);\n\n  if (!data) {\n    data = this.createJSONNode(meta);\n    data.src = this.src;\n    if (data.useDefine === true) data.useDefine = true;\n  }\n\n  return data;\n};\n\nexport { ConstNode };","map":{"version":3,"names":["TempNode","declarationRegexp","ConstNode","src","useDefine","call","parse","PI","PI2","RECIPROCAL_PI","RECIPROCAL_PI2","LOG2","EPSILON","prototype","Object","create","constructor","nodeType","getType","builder","getTypeByFormat","type","name","value","match","charAt","length","build","output","include","format","generate","copy","source","toJSON","meta","data","getJSONNode","createJSONNode"],"sources":["/Users/98yaroslavgorban/Desktop/gltfjsx-forked/node_modules/three-stdlib/nodes/core/ConstNode.js"],"sourcesContent":["import { TempNode } from './TempNode.js';\n\nvar declarationRegexp = /^([a-z_0-9]+)\\s([a-z_0-9]+)\\s?\\=?\\s?(.*?)(\\;|$)/i;\n\nfunction ConstNode(src, useDefine) {\n  TempNode.call(this);\n  this.parse(src || ConstNode.PI, useDefine);\n}\n\nConstNode.PI = 'PI';\nConstNode.PI2 = 'PI2';\nConstNode.RECIPROCAL_PI = 'RECIPROCAL_PI';\nConstNode.RECIPROCAL_PI2 = 'RECIPROCAL_PI2';\nConstNode.LOG2 = 'LOG2';\nConstNode.EPSILON = 'EPSILON';\nConstNode.prototype = Object.create(TempNode.prototype);\nConstNode.prototype.constructor = ConstNode;\nConstNode.prototype.nodeType = 'Const';\n\nConstNode.prototype.getType = function (builder) {\n  return builder.getTypeByFormat(this.type);\n};\n\nConstNode.prototype.parse = function (src, useDefine) {\n  this.src = src || '';\n  var name,\n      type,\n      value = '';\n  var match = this.src.match(declarationRegexp);\n  this.useDefine = useDefine || this.src.charAt(0) === '#';\n\n  if (match && match.length > 1) {\n    type = match[1];\n    name = match[2];\n    value = match[3];\n  } else {\n    name = this.src;\n    type = 'f';\n  }\n\n  this.name = name;\n  this.type = type;\n  this.value = value;\n};\n\nConstNode.prototype.build = function (builder, output) {\n  if (output === 'source') {\n    if (this.value) {\n      if (this.useDefine) {\n        return '#define ' + this.name + ' ' + this.value;\n      }\n\n      return 'const ' + this.type + ' ' + this.name + ' = ' + this.value + ';';\n    } else if (this.useDefine) {\n      return this.src;\n    }\n  } else {\n    builder.include(this);\n    return builder.format(this.name, this.getType(builder), output);\n  }\n};\n\nConstNode.prototype.generate = function (builder, output) {\n  return builder.format(this.name, this.getType(builder), output);\n};\n\nConstNode.prototype.copy = function (source) {\n  TempNode.prototype.copy.call(this, source);\n  this.parse(source.src, source.useDefine);\n  return this;\n};\n\nConstNode.prototype.toJSON = function (meta) {\n  var data = this.getJSONNode(meta);\n\n  if (!data) {\n    data = this.createJSONNode(meta);\n    data.src = this.src;\n    if (data.useDefine === true) data.useDefine = true;\n  }\n\n  return data;\n};\n\nexport { ConstNode };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}